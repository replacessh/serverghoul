"use strict";(self.webpackChunkshop_client=self.webpackChunkshop_client||[]).push([[76],{1076:(e,r,t)=>{t.r(r),t.d(r,{default:()=>N});var o=t(5043),a=t(9456),i=t(3216),n=t(6240),s=t(6446),l=t(1637),c=t(4150),d=t(4194),m=t(3336),p=t(310),u=t(8903),h=t(2559),x=t(7392),v=t(1906),g=t(2110),A=t(6591),f=t(6494),y=t(5865),b=t(3845),k=t(9662),C=t(579);const S=(0,k.A)((0,C.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),j=(0,k.A)((0,C.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),w=(0,k.A)((0,C.jsx)("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"}),"Sort");var M=t(7478),R=t(9066);const N=()=>{const[e,r]=(0,o.useState)([]),[t,k]=(0,o.useState)(!0),[N,I]=(0,o.useState)(null),[z,$]=(0,o.useState)("newest"),[P,D]=(0,o.useState)("desc"),[W,X]=(0,o.useState)("all"),F=(0,i.Zp)(),H=(0,a.wA)(),L=(0,n.A)(),[T,_]=(0,o.useState)(!1),{token:B}=(0,R.As)();(0,o.useEffect)((()=>{console.log("ProductsPage mounted, loading products..."),E()}),[]);const E=()=>{try{k(!0),I(null);const e=localStorage.getItem("admin_products");if(console.log("Loading products from localStorage:",e),e){const t=JSON.parse(e);console.log("Parsed products:",t),r(t)}else console.log("No products found in localStorage"),r([])}catch(e){console.error("Error loading products:",e),I("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432")}finally{k(!1)}},O=[..."all"===W?e:e.filter((e=>e.category===W))].sort(((e,r)=>{switch(z){case"newest":return new Date(r.createdAt||0).getTime()-new Date(e.createdAt||0).getTime();case"price_asc":return e.price-r.price;case"price_desc":return r.price-e.price;default:return 0}}));return"asc"===P&&O.reverse(),t?(0,C.jsx)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,C.jsx)(l.A,{})}):N?(0,C.jsx)(c.A,{children:(0,C.jsx)(d.A,{severity:"error",sx:{mt:2},children:N})}):(0,C.jsxs)(s.A,{sx:{height:"100%"},children:[(0,C.jsx)(m.A,{elevation:0,sx:{p:4,mb:4,borderRadius:3,backgroundColor:(0,p.X4)(L.palette.background.paper,.8),backdropFilter:"blur(10px)",boxShadow:`0 4px 20px ${(0,p.X4)(L.palette.primary.main,.1)}`},children:(0,C.jsxs)(u.Ay,{container:!0,spacing:3,alignItems:"center",children:[(0,C.jsx)(u.Ay,{item:!0,xs:12,md:4,children:(0,C.jsxs)(m.A,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",borderRadius:2,boxShadow:"none",border:`1px solid ${(0,p.X4)(L.palette.divider,.1)}`,"&:hover":{borderColor:L.palette.primary.main,boxShadow:`0 0 0 2px ${(0,p.X4)(L.palette.primary.main,.1)}`}},children:[(0,C.jsx)(h.Ay,{sx:{ml:1,flex:1},placeholder:"\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432...",inputProps:{"aria-label":"search products"}}),(0,C.jsx)(x.A,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,C.jsx)(S,{})})]})}),(0,C.jsx)(u.Ay,{item:!0,xs:12,md:8,children:(0,C.jsxs)(s.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(v.A,{variant:"outlined",startIcon:(0,C.jsx)(j,{}),sx:{borderRadius:2,px:3,"&:hover":{backgroundColor:(0,p.X4)(L.palette.primary.main,.1)}},children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"}),(0,C.jsx)(v.A,{variant:"outlined",startIcon:(0,C.jsx)(w,{}),sx:{borderRadius:2,px:3,"&:hover":{backgroundColor:(0,p.X4)(L.palette.primary.main,.1)}},children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430"})]})})]})}),(0,C.jsx)(u.Ay,{container:!0,spacing:4,children:O.map((e=>(0,C.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,C.jsxs)(g.A,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:3,transition:"all 0.3s ease","&:hover":{transform:"translateY(-8px)",boxShadow:`0 12px 28px ${(0,p.X4)(L.palette.primary.main,.1)}`}},children:[(0,C.jsx)(A.A,{component:"img",height:"280",image:e.imageUrl,alt:e.name,sx:{objectFit:"cover",borderTopLeftRadius:12,borderTopRightRadius:12}}),(0,C.jsxs)(f.A,{sx:{flexGrow:1,p:3},children:[(0,C.jsx)(y.A,{gutterBottom:!0,variant:"h6",component:"div",sx:{fontWeight:600,mb:2},children:e.name}),(0,C.jsx)(y.A,{variant:"body2",color:"text.secondary",sx:{mb:3,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.description}),(0,C.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,C.jsxs)(y.A,{variant:"h6",sx:{fontWeight:700,color:"primary.main"},children:[e.price.toLocaleString("ru-RU")," \u20bd"]}),(0,C.jsx)(b.A,{label:e.category,size:"small",sx:{backgroundColor:(0,p.X4)(L.palette.primary.main,.1),color:"primary.main",fontWeight:500}})]}),(0,C.jsxs)(s.A,{sx:{display:"flex",gap:1},children:[(0,C.jsx)(v.A,{variant:"contained",color:"primary",onClick:()=>(async e=>{if(B)try{I(null),H((0,M.bE)({id:e.id,productId:e.id,name:e.name,price:e.price,quantity:1,size:e.sizes[0]||"default",image:e.imageUrl})),alert("\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")}catch(r){console.error("Error adding to cart:",r),I("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")}else I("\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f")})(e),fullWidth:!0,sx:{py:1.5,borderRadius:2,textTransform:"none",fontWeight:600,boxShadow:"none","&:hover":{boxShadow:`0 4px 12px ${(0,p.X4)(L.palette.primary.main,.3)}`}},children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"}),(0,C.jsx)(v.A,{variant:"outlined",color:"primary",onClick:()=>F(`/products/${e.id}`),sx:{py:1.5,borderRadius:2,textTransform:"none",fontWeight:600,minWidth:"120px","&:hover":{backgroundColor:(0,p.X4)(L.palette.primary.main,.1)}},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})]})]})]})},e.id)))})]})}},1637:(e,r,t)=>{t.d(r,{A:()=>R});var o=t(8587),a=t(8168),i=t(5043),n=t(8387),s=t(8610),l=t(3290),c=t(6803),d=t(8206),m=t(4535),p=t(2532),u=t(2372);function h(e){return(0,u.Ay)("MuiCircularProgress",e)}(0,p.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var x=t(579);const v=["className","color","disableShrink","size","style","thickness","value","variant"];let g,A,f,y,b=e=>e;const k=44,C=(0,l.i7)(g||(g=b`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),S=(0,l.i7)(A||(A=b`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),j=(0,m.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[t.variant],r[`color${(0,c.A)(t.color)}`]]}})((e=>{let{ownerState:r,theme:t}=e;return(0,a.A)({display:"inline-block"},"determinate"===r.variant&&{transition:t.transitions.create("transform")},"inherit"!==r.color&&{color:(t.vars||t).palette[r.color].main})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&(0,l.AH)(f||(f=b`
      animation: ${0} 1.4s linear infinite;
    `),C)})),w=(0,m.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),M=(0,m.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.circle,r[`circle${(0,c.A)(t.variant)}`],t.disableShrink&&r.circleDisableShrink]}})((e=>{let{ownerState:r,theme:t}=e;return(0,a.A)({stroke:"currentColor"},"determinate"===r.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===r.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&!r.disableShrink&&(0,l.AH)(y||(y=b`
      animation: ${0} 1.4s ease-in-out infinite;
    `),S)})),R=i.forwardRef((function(e,r){const t=(0,d.b)({props:e,name:"MuiCircularProgress"}),{className:i,color:l="primary",disableShrink:m=!1,size:p=40,style:u,thickness:g=3.6,value:A=0,variant:f="indeterminate"}=t,y=(0,o.A)(t,v),b=(0,a.A)({},t,{color:l,disableShrink:m,size:p,thickness:g,value:A,variant:f}),C=(e=>{const{classes:r,variant:t,color:o,disableShrink:a}=e,i={root:["root",t,`color${(0,c.A)(o)}`],svg:["svg"],circle:["circle",`circle${(0,c.A)(t)}`,a&&"circleDisableShrink"]};return(0,s.A)(i,h,r)})(b),S={},R={},N={};if("determinate"===f){const e=2*Math.PI*((k-g)/2);S.strokeDasharray=e.toFixed(3),N["aria-valuenow"]=Math.round(A),S.strokeDashoffset=`${((100-A)/100*e).toFixed(3)}px`,R.transform="rotate(-90deg)"}return(0,x.jsx)(j,(0,a.A)({className:(0,n.A)(C.root,i),style:(0,a.A)({width:p,height:p},R,u),ownerState:b,ref:r,role:"progressbar"},N,y,{children:(0,x.jsx)(w,{className:C.svg,ownerState:b,viewBox:"22 22 44 44",children:(0,x.jsx)(M,{className:C.circle,style:S,ownerState:b,cx:k,cy:k,r:(k-g)/2,fill:"none",strokeWidth:g})})}))}))},2110:(e,r,t)=>{t.d(r,{A:()=>g});var o=t(8168),a=t(8587),i=t(5043),n=t(8387),s=t(8610),l=t(4535),c=t(8206),d=t(3336),m=t(2532),p=t(2372);function u(e){return(0,p.Ay)("MuiCard",e)}(0,m.A)("MuiCard",["root"]);var h=t(579);const x=["className","raised"],v=(0,l.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"}))),g=i.forwardRef((function(e,r){const t=(0,c.b)({props:e,name:"MuiCard"}),{className:i,raised:l=!1}=t,d=(0,a.A)(t,x),m=(0,o.A)({},t,{raised:l}),p=(e=>{const{classes:r}=e;return(0,s.A)({root:["root"]},u,r)})(m);return(0,h.jsx)(v,(0,o.A)({className:(0,n.A)(p.root,i),elevation:l?8:void 0,ref:r,ownerState:m},d))}))},6494:(e,r,t)=>{t.d(r,{A:()=>v});var o=t(8168),a=t(8587),i=t(5043),n=t(8387),s=t(8610),l=t(4535),c=t(8206),d=t(2532),m=t(2372);function p(e){return(0,m.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var u=t(579);const h=["className","component"],x=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),v=i.forwardRef((function(e,r){const t=(0,c.b)({props:e,name:"MuiCardContent"}),{className:i,component:l="div"}=t,d=(0,a.A)(t,h),m=(0,o.A)({},t,{component:l}),v=(e=>{const{classes:r}=e;return(0,s.A)({root:["root"]},p,r)})(m);return(0,u.jsx)(x,(0,o.A)({as:l,className:(0,n.A)(v.root,i),ownerState:m,ref:r},d))}))},6591:(e,r,t)=>{t.d(r,{A:()=>A});var o=t(8587),a=t(8168),i=t(5043),n=t(8387),s=t(8610),l=t(8206),c=t(4535),d=t(2532),m=t(2372);function p(e){return(0,m.Ay)("MuiCardMedia",e)}(0,d.A)("MuiCardMedia",["root","media","img"]);var u=t(579);const h=["children","className","component","image","src","style"],x=(0,c.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e,{isMediaComponent:o,isImageComponent:a}=t;return[r.root,o&&r.media,a&&r.img]}})((e=>{let{ownerState:r}=e;return(0,a.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},r.isMediaComponent&&{width:"100%"},r.isImageComponent&&{objectFit:"cover"})})),v=["video","audio","picture","iframe","img"],g=["picture","img"],A=i.forwardRef((function(e,r){const t=(0,l.b)({props:e,name:"MuiCardMedia"}),{children:i,className:c,component:d="div",image:m,src:A,style:f}=t,y=(0,o.A)(t,h),b=-1!==v.indexOf(d),k=!b&&m?(0,a.A)({backgroundImage:`url("${m}")`},f):f,C=(0,a.A)({},t,{component:d,isMediaComponent:b,isImageComponent:-1!==g.indexOf(d)}),S=(e=>{const{classes:r,isMediaComponent:t,isImageComponent:o}=e,a={root:["root",t&&"media",o&&"img"]};return(0,s.A)(a,p,r)})(C);return(0,u.jsx)(x,(0,a.A)({className:(0,n.A)(S.root,c),as:d,role:!b&&m?"img":void 0,ref:r,style:k,ownerState:C,src:b?m||A:void 0},y,{children:i}))}))}}]);
//# sourceMappingURL=76.dd43a604.chunk.js.map