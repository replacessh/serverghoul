"use strict";(self.webpackChunkshop_client=self.webpackChunkshop_client||[]).push([[117],{1637:(e,r,t)=>{t.d(r,{A:()=>P});var a=t(8587),s=t(8168),i=t(5043),n=t(8387),o=t(8610),l=t(3290),c=t(6803),h=t(8206),d=t(4535),m=t(2532),u=t(2372);function f(e){return(0,u.Ay)("MuiCircularProgress",e)}(0,m.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var p=t(579);const v=["className","color","disableShrink","size","style","thickness","value","variant"];let x,A,k,y,g=e=>e;const b=44,S=(0,l.i7)(x||(x=g`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),j=(0,l.i7)(A||(A=g`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),w=(0,d.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[t.variant],r[`color${(0,c.A)(t.color)}`]]}})((e=>{let{ownerState:r,theme:t}=e;return(0,s.A)({display:"inline-block"},"determinate"===r.variant&&{transition:t.transitions.create("transform")},"inherit"!==r.color&&{color:(t.vars||t).palette[r.color].main})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&(0,l.AH)(k||(k=g`
      animation: ${0} 1.4s linear infinite;
    `),S)})),C=(0,d.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),D=(0,d.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.circle,r[`circle${(0,c.A)(t.variant)}`],t.disableShrink&&r.circleDisableShrink]}})((e=>{let{ownerState:r,theme:t}=e;return(0,s.A)({stroke:"currentColor"},"determinate"===r.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===r.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&!r.disableShrink&&(0,l.AH)(y||(y=g`
      animation: ${0} 1.4s ease-in-out infinite;
    `),j)})),P=i.forwardRef((function(e,r){const t=(0,h.b)({props:e,name:"MuiCircularProgress"}),{className:i,color:l="primary",disableShrink:d=!1,size:m=40,style:u,thickness:x=3.6,value:A=0,variant:k="indeterminate"}=t,y=(0,a.A)(t,v),g=(0,s.A)({},t,{color:l,disableShrink:d,size:m,thickness:x,value:A,variant:k}),S=(e=>{const{classes:r,variant:t,color:a,disableShrink:s}=e,i={root:["root",t,`color${(0,c.A)(a)}`],svg:["svg"],circle:["circle",`circle${(0,c.A)(t)}`,s&&"circleDisableShrink"]};return(0,o.A)(i,f,r)})(g),j={},P={},$={};if("determinate"===k){const e=2*Math.PI*((b-x)/2);j.strokeDasharray=e.toFixed(3),$["aria-valuenow"]=Math.round(A),j.strokeDashoffset=`${((100-A)/100*e).toFixed(3)}px`,P.transform="rotate(-90deg)"}return(0,p.jsx)(w,(0,s.A)({className:(0,n.A)(S.root,i),style:(0,s.A)({width:m,height:m},P,u),ownerState:g,ref:r,role:"progressbar"},$,y,{children:(0,p.jsx)(C,{className:S.svg,ownerState:g,viewBox:"22 22 44 44",children:(0,p.jsx)(D,{className:S.circle,style:j,ownerState:g,cx:b,cy:b,r:(b-x)/2,fill:"none",strokeWidth:x})})}))}))},6117:(e,r,t)=>{t.r(r),t.d(r,{default:()=>p});var a=t(5043),s=t(3216),i=t(4150),n=t(6446),o=t(1637),l=t(3336),c=t(5865),h=t(4194),d=t(5795),m=t(1906),u=t(9066),f=t(579);const p=()=>{const[e,r]=(0,a.useState)({name:"",email:"",phone:""}),[t,p]=(0,a.useState)(null),[v,x]=(0,a.useState)(null),[A,k]=(0,a.useState)(!1),y=(0,s.Zp)(),{user:g,token:b}=(0,u.As)();(0,a.useEffect)((()=>{if(!b)return void y("/login");(async()=>{try{const e=await fetch("http://localhost:3002/api/users/profile",{headers:{Authorization:`Bearer ${b}`},credentials:"include"});if(e.ok){const t=await e.json();r({name:t.name||"",email:t.email||"",phone:t.phone||""})}else p("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0444\u0438\u043b\u044f")}catch(e){console.error("Error fetching profile:",e),p("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0444\u0438\u043b\u044f")}})()}),[b,y]);const S=e=>{const{name:t,value:a}=e.target;r((e=>({...e,[t]:a})))};return g?(0,f.jsx)(i.A,{maxWidth:"sm",children:(0,f.jsx)(n.A,{sx:{mt:8,mb:4},children:(0,f.jsxs)(l.A,{elevation:3,sx:{p:4},children:[(0,f.jsx)(c.A,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),t&&(0,f.jsx)(h.A,{severity:"error",sx:{mb:2},children:t}),v&&(0,f.jsx)(h.A,{severity:"success",sx:{mb:2},children:v}),(0,f.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),p(null),x(null),k(!0);try{const r=await fetch("http://localhost:3002/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},credentials:"include",body:JSON.stringify(e)}),t=await r.json();r.ok?x("\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"):p(t.message||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f")}catch(t){console.error("Error updating profile:",t),p("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f")}finally{k(!1)}},children:[(0,f.jsx)(d.A,{fullWidth:!0,label:"\u0418\u043c\u044f",name:"name",value:e.name,onChange:S,margin:"normal",required:!0}),(0,f.jsx)(d.A,{fullWidth:!0,label:"Email",name:"email",type:"email",value:e.email,onChange:S,margin:"normal",required:!0}),(0,f.jsx)(d.A,{fullWidth:!0,label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",value:e.phone,onChange:S,margin:"normal"}),(0,f.jsx)(m.A,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",size:"large",disabled:A,sx:{mt:3,mb:2},children:A?(0,f.jsx)(o.A,{size:24}):"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})]})]})})}):(0,f.jsx)(i.A,{maxWidth:"sm",children:(0,f.jsx)(n.A,{sx:{mt:8,display:"flex",justifyContent:"center"},children:(0,f.jsx)(o.A,{})})})}}}]);
//# sourceMappingURL=117.aa5680c6.chunk.js.map