"use strict";(self.webpackChunkshop_client=self.webpackChunkshop_client||[]).push([[619],{9619:(e,r,t)=>{t.r(r),t.d(r,{default:()=>G});var s=t(5043),a=t(6446),i=t(6240),o=t(1637),n=t(4150),l=t(4194),c=t(3336),d=t(310),p=t(5865),u=t(4669),x=t(4056),h=t(9650),m=t(1806),g=t(4882),A=t(8076),j=t(2420),b=t(3460),v=t(1659),k=t(2143),f=t(3845),y=t(7392),S=t(1906),$=t(8903),C=t(2110),w=t(6494),z=t(35),I=t(6600),R=t(5316),U=t(5795),D=t(9347),W=t(5155),M=t(9010),X=t(165),O=t(351),E=t(751),N=t(141),B=t(8606),L=t(3768),T=t(6987),F=t(8869);const H="http://localhost:3001",q={auth:{login:`${H}/api/auth/login`,register:`${H}/api/auth/register`,refresh:`${H}/api/auth/refresh`,logout:`${H}/api/auth/logout`},products:{list:`${H}/api/products`,detail:e=>`${H}/api/products/${e}`,create:`${H}/api/products`,update:e=>`${H}/api/products/${e}`,delete:e=>`${H}/api/products/${e}`},support:{list:`${H}/api/support`,detail:e=>`${H}/api/support/${e}`,create:`${H}/api/support`,update:e=>`${H}/api/support/${e}`},profile:{get:`${H}/api/profile`,update:`${H}/api/profile`,changePassword:`${H}/api/profile/password`},admin:{users:{list:`${H}/api/admin/users`,detail:e=>`${H}/api/admin/users/${e}`,block:e=>`${H}/api/admin/users/${e}/block`,unblock:e=>`${H}/api/admin/users/${e}/unblock`},products:{list:`${H}/api/admin/products`,create:`${H}/api/admin/products`,update:e=>`${H}/api/admin/products/${e}`,delete:e=>`${H}/api/admin/products/${e}`}}};var P=t(579);function _(e){const{children:r,value:t,index:s,...i}=e;return(0,P.jsx)("div",{role:"tabpanel",hidden:t!==s,id:`admin-tabpanel-${s}`,"aria-labelledby":`admin-tab-${s}`,...i,children:t===s&&(0,P.jsx)(a.A,{sx:{p:3},children:r})})}const J="admin_products",Y=[{id:"1",name:"\u0424\u0443\u0442\u0431\u043e\u043b\u043a\u0430 Classic",description:"\u041a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0445\u043b\u043e\u043f\u043a\u043e\u0432\u0430\u044f \u0444\u0443\u0442\u0431\u043e\u043b\u043a\u0430",price:1999,category:"\u043e\u0434\u0435\u0436\u0434\u0430",stock:10,imageUrl:"https://example.com/tshirt.jpg",sizes:["S","M","L","XL"],createdAt:(new Date).toISOString()},{id:"2",name:"\u0414\u0436\u0438\u043d\u0441\u044b Slim Fit",description:"\u0421\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u0436\u0438\u043d\u0441\u044b \u043f\u0440\u044f\u043c\u043e\u0433\u043e \u043a\u0440\u043e\u044f",price:3999,category:"\u043e\u0434\u0435\u0436\u0434\u0430",stock:15,imageUrl:"https://example.com/jeans.jpg",sizes:["M","L","XL"],createdAt:(new Date).toISOString()},{id:"3",name:"\u041a\u0440\u043e\u0441\u0441\u043e\u0432\u043a\u0438 Sport",description:"\u0423\u0434\u043e\u0431\u043d\u044b\u0435 \u0441\u043f\u043e\u0440\u0442\u0438\u0432\u043d\u044b\u0435 \u043a\u0440\u043e\u0441\u0441\u043e\u0432\u043a\u0438",price:5999,category:"\u043e\u0431\u0443\u0432\u044c",stock:8,imageUrl:"https://example.com/sneakers.jpg",sizes:["40","41","42","43"],createdAt:(new Date).toISOString()}],G=()=>{const e=(0,i.A)(),{enqueueSnackbar:r}=(0,T.dh)(),[t,H]=(0,s.useState)(0),[G,K]=(0,s.useState)([]),[Q,V]=(0,s.useState)([]),[Z,ee]=(0,s.useState)([]),[re,te]=(0,s.useState)(!0),[se,ae]=(0,s.useState)(null),[ie,oe]=(0,s.useState)(!1),[ne,le]=(0,s.useState)({name:"",description:"",price:0,category:"",stock:0,imageUrl:"",sizes:[]}),[ce,de]=(0,s.useState)(null),[pe,ue]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{try{te(!0);const e=localStorage.getItem(J);if(e)try{const r=JSON.parse(e);V(r)}catch(s){console.error("Error loading products from localStorage:",s)}else V(Y),localStorage.setItem(J,JSON.stringify(Y));const[r,t]=await Promise.all([F.A.get(q.admin.users.list),F.A.get("/admin/support/tickets")]);console.log("Users response:",r.data),console.log("Tickets response:",t.data),K(r.data),ee(t.data),ae(null)}catch(s){var e,t;console.error("Error fetching data:",s);const a=(null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||s.message||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445";ae(a),r(a,{variant:"error"})}finally{te(!1)}})()}),[]),(0,s.useEffect)((()=>{Q.length>0&&localStorage.setItem(J,JSON.stringify(Q))}),[Q]);return re?(0,P.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,P.jsx)(o.A,{})}):se?(0,P.jsx)(n.A,{maxWidth:"lg",sx:{mt:4},children:(0,P.jsx)(l.A,{severity:"error",children:se})}):(0,P.jsxs)(a.A,{sx:{height:"100%"},children:[(0,P.jsxs)(c.A,{elevation:0,sx:{p:4,mb:4,borderRadius:3,backgroundColor:(0,d.X4)(e.palette.background.paper,.8),backdropFilter:"blur(10px)",boxShadow:`0 4px 20px ${(0,d.X4)(e.palette.primary.main,.1)}`},children:[(0,P.jsx)(p.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700,color:"primary.main",mb:4,position:"relative","&::after":{content:'""',position:"absolute",bottom:-16,left:0,width:60,height:4,backgroundColor:"secondary.main",borderRadius:2}},children:"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"}),(0,P.jsx)(a.A,{sx:{borderBottom:1,borderColor:"divider",mb:4},children:(0,P.jsxs)(u.A,{value:t,onChange:(e,r)=>{H(r)},"aria-label":"admin tabs",sx:{"& .MuiTabs-indicator":{backgroundColor:"secondary.main",height:3}},children:[(0,P.jsx)(x.A,{icon:(0,P.jsx)(W.A,{}),label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",sx:{textTransform:"none",fontWeight:600,fontSize:"1.1rem",minHeight:64}}),(0,P.jsx)(x.A,{icon:(0,P.jsx)(M.A,{}),label:"\u0422\u043e\u0432\u0430\u0440\u044b",sx:{textTransform:"none",fontWeight:600,fontSize:"1.1rem",minHeight:64}}),(0,P.jsx)(x.A,{icon:(0,P.jsx)(X.A,{}),label:"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430",sx:{textTransform:"none",fontWeight:600,fontSize:"1.1rem",minHeight:64}})]})}),(0,P.jsx)(_,{value:t,index:0,children:(0,P.jsx)(c.A,{elevation:0,sx:{p:3,borderRadius:3,backgroundColor:(0,d.X4)(e.palette.background.paper,.8),backdropFilter:"blur(10px)"},children:(0,P.jsx)(h.A,{component:c.A,children:(0,P.jsxs)(m.A,{children:[(0,P.jsx)(g.A,{children:(0,P.jsxs)(A.A,{children:[(0,P.jsx)(j.A,{children:"\u0418\u043c\u044f"}),(0,P.jsx)(j.A,{children:"Email"}),(0,P.jsx)(j.A,{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,P.jsx)(j.A,{children:"\u0420\u043e\u043b\u044c"}),(0,P.jsx)(j.A,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,P.jsx)(j.A,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,P.jsx)(b.A,{children:[...G].sort(((e,r)=>"ADMIN"===e.role&&"ADMIN"!==r.role?-1:"ADMIN"!==e.role&&"ADMIN"===r.role?1:0)).map((e=>(0,P.jsxs)(A.A,{children:[(0,P.jsx)(j.A,{children:e.name}),(0,P.jsx)(j.A,{children:e.email}),(0,P.jsx)(j.A,{children:e.phone}),(0,P.jsx)(j.A,{children:(0,P.jsxs)(v.A,{value:e.role,onChange:t=>(async(e,t)=>{try{"ADMIN"===t?await F.A.post(`/users/make-admin/${e}`):await F.A.post(`/users/make-user/${e}`),K(G.map((r=>r.id===e?{...r,role:t}:r))),r("\u0420\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",{variant:"success"})}catch(s){console.error("Error updating user role:",s),r("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0440\u043e\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",{variant:"error"})}})(e.id,t.target.value),size:"small",children:[(0,P.jsx)(k.A,{value:"USER",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,P.jsx)(k.A,{value:"ADMIN",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"})]})}),(0,P.jsx)(j.A,{children:(0,P.jsx)(f.A,{label:e.isBlocked?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d":"\u0410\u043a\u0442\u0438\u0432\u0435\u043d",color:e.isBlocked?"error":"success",size:"small"})}),(0,P.jsx)(j.A,{children:e.isBlocked?(0,P.jsx)(y.A,{onClick:()=>(async e=>{try{await F.A.post(`/users/unban/${e}`),K(G.map((r=>r.id===e?{...r,isBlocked:!1}:r))),r("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d",{variant:"success"})}catch(t){console.error("Error unblocking user:",t),r("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",{variant:"error"})}})(e.id),color:"success",children:(0,P.jsx)(O.A,{})}):(0,P.jsx)(y.A,{onClick:()=>(async e=>{try{await F.A.post(`/users/ban/${e}`,{reason:"\u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b"}),K(G.map((r=>r.id===e?{...r,isBlocked:!0}:r))),r("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d",{variant:"success"})}catch(t){console.error("Error blocking user:",t),r("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",{variant:"error"})}})(e.id),color:"error",children:(0,P.jsx)(E.A,{})})})]},e.id)))})]})})})}),(0,P.jsx)(_,{value:t,index:1,children:(0,P.jsxs)(c.A,{elevation:0,sx:{p:3,borderRadius:3,backgroundColor:(0,d.X4)(e.palette.background.paper,.8),backdropFilter:"blur(10px)"},children:[(0,P.jsx)(a.A,{sx:{mb:4},children:(0,P.jsx)(S.A,{variant:"contained",startIcon:(0,P.jsx)(N.A,{}),onClick:()=>oe(!0),sx:{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark},boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderRadius:"8px",padding:"10px 24px",textTransform:"none",fontSize:"1rem",fontWeight:500},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})}),(0,P.jsx)($.Ay,{container:!0,spacing:3,children:Q.map((t=>(0,P.jsx)($.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,P.jsxs)(C.A,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 16px rgba(0,0,0,0.1)"},borderRadius:"12px",overflow:"hidden"},children:[(0,P.jsx)(a.A,{sx:{position:"relative",paddingTop:"75%",backgroundColor:e.palette.grey[100]},children:t.imageUrl?(0,P.jsx)(a.A,{component:"img",src:t.imageUrl,alt:t.name,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}):(0,P.jsx)(a.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.grey[200]},children:(0,P.jsx)(M.A,{sx:{fontSize:48,color:e.palette.grey[400]}})})}),(0,P.jsxs)(w.A,{sx:{flexGrow:1,p:3},children:[(0,P.jsx)(p.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:e.palette.text.primary,mb:1},children:t.name}),(0,P.jsx)(f.A,{label:t.category,size:"small",sx:{backgroundColor:(0,d.X4)(e.palette.primary.main,.1),color:e.palette.primary.main,mb:2}}),(0,P.jsxs)(p.A,{variant:"h6",color:"primary",sx:{fontWeight:700,mb:1},children:[t.price.toLocaleString("ru-RU")," \u20bd"]}),(0,P.jsx)(a.A,{sx:{mb:2},children:(0,P.jsxs)(p.A,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,P.jsx)(B.A,{sx:{fontSize:16,color:t.stock>0?"success.main":"error.main"}}),t.stock>0?`\u0412 \u043d\u0430\u043b\u0438\u0447\u0438\u0438: ${t.stock} \u0448\u0442.`:"\u041d\u0435\u0442 \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438"]})}),t.sizes&&t.sizes.length>0&&(0,P.jsxs)(a.A,{sx:{mb:2},children:[(0,P.jsx)(p.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u044b:"}),(0,P.jsx)(a.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:t.sizes.map((r=>(0,P.jsx)(f.A,{label:r,size:"small",sx:{backgroundColor:(0,d.X4)(e.palette.secondary.main,.1),color:e.palette.secondary.main}},r)))})]}),(0,P.jsx)(a.A,{sx:{mt:"auto",display:"flex",justifyContent:"flex-end"},children:(0,P.jsx)(y.A,{color:"error",onClick:()=>{return e=t.id,V((r=>r.filter((r=>r.id!==e)))),void r("\u0422\u043e\u0432\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",{variant:"success"});var e},sx:{backgroundColor:(0,d.X4)(e.palette.error.main,.1),"&:hover":{backgroundColor:(0,d.X4)(e.palette.error.main,.2)}},children:(0,P.jsx)(L.A,{})})})]})]})},t.id)))})]})}),(0,P.jsx)(_,{value:t,index:2,children:(0,P.jsx)(c.A,{elevation:0,sx:{p:3,borderRadius:3,backgroundColor:(0,d.X4)(e.palette.background.paper,.8),backdropFilter:"blur(10px)"},children:(0,P.jsx)(h.A,{component:c.A,children:(0,P.jsxs)(m.A,{children:[(0,P.jsx)(g.A,{children:(0,P.jsxs)(A.A,{children:[(0,P.jsx)(j.A,{children:"\u0422\u0435\u043c\u0430"}),(0,P.jsx)(j.A,{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,P.jsx)(j.A,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,P.jsx)(j.A,{children:"\u0414\u0430\u0442\u0430"}),(0,P.jsx)(j.A,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,P.jsx)(b.A,{children:Z.map((e=>(0,P.jsxs)(A.A,{children:[(0,P.jsx)(j.A,{children:e.title}),(0,P.jsx)(j.A,{children:e.user.name}),(0,P.jsx)(j.A,{children:(0,P.jsxs)(v.A,{value:e.status,onChange:t=>(async(e,t)=>{var s,a;try{console.log("Updating ticket status:",{ticketId:e,newStatus:t});try{const e=await F.A.get("/health");console.log("Server health check:",e.status)}catch(i){throw console.error("Server health check failed:",i),new Error("\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443.")}const s={status:t};console.log("Request data:",s);const a=await F.A.patch(`/admin/support/tickets/${e}/status`,s,{timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("Response status:",a.status),console.log("Response data:",a.data),200!==a.status)throw console.error("Unexpected response status:",a.status),new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u0442\u0438\u043a\u0435\u0442\u0430");ee(Z.map((r=>r.id===e?{...r,status:t}:r))),r("\u0421\u0442\u0430\u0442\u0443\u0441 \u0442\u0438\u043a\u0435\u0442\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d",{variant:"success",autoHideDuration:3e3})}catch(i){console.error("Detailed error updating ticket status:",{error:i,response:i.response,request:i.request,message:i.message});let e="\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0442\u0438\u043a\u0435\u0442\u0430";if("Network Error"===i.message)e="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443.";else if(i.response)switch(i.response.status){case 400:e=(null===(s=i.response.data)||void 0===s?void 0:s.message)||"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435";break;case 401:e="\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0441\u043d\u043e\u0432\u0430.";break;case 403:e="\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f";break;case 404:e="\u0422\u0438\u043a\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d";break;case 500:e="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.";break;default:e=(null===(a=i.response.data)||void 0===a?void 0:a.message)||i.message}else i.request&&(e="\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443.");r(e,{variant:"error",autoHideDuration:5e3,anchorOrigin:{vertical:"top",horizontal:"center"}})}})(e.id,t.target.value),size:"small",children:[(0,P.jsx)(k.A,{value:"pending",children:"\u041e\u0436\u0438\u0434\u0430\u0435\u0442"}),(0,P.jsx)(k.A,{value:"in_progress",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),(0,P.jsx)(k.A,{value:"resolved",children:"\u0420\u0435\u0448\u0435\u043d\u043e"}),(0,P.jsx)(k.A,{value:"closed",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u043e"})]})}),(0,P.jsx)(j.A,{children:new Date(e.createdAt).toLocaleDateString("ru-RU")}),(0,P.jsx)(j.A,{children:(0,P.jsx)(y.A,{color:"error",onClick:()=>(async e=>{try{await F.A.delete(`/admin/support/tickets/${e}`),ee(Z.filter((r=>r.id!==e))),r("\u0422\u0438\u043a\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d",{variant:"success"})}catch(t){console.error("Error deleting ticket:",t),r("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0442\u0438\u043a\u0435\u0442\u0430",{variant:"error"})}})(e.id),children:(0,P.jsx)(L.A,{})})})]},e.id)))})]})})})})]}),(0,P.jsxs)(z.A,{open:ie,onClose:()=>oe(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"12px"}},children:[(0,P.jsx)(I.A,{sx:{borderBottom:`1px solid ${e.palette.divider}`,pb:2},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0442\u043e\u0432\u0430\u0440"}),(0,P.jsx)(R.A,{sx:{pt:3},children:(0,P.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,P.jsx)(U.A,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:ne.name,onChange:e=>le({...ne,name:e.target.value}),fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}}),(0,P.jsx)(U.A,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:ne.description,onChange:e=>le({...ne,description:e.target.value}),multiline:!0,rows:4,fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}}),(0,P.jsx)(U.A,{label:"\u0426\u0435\u043d\u0430",type:"number",value:ne.price,onChange:e=>le({...ne,price:Number(e.target.value)}),fullWidth:!0,variant:"outlined",InputProps:{endAdornment:(0,P.jsx)(p.A,{sx:{color:"text.secondary"},children:"\u20bd"})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}}),(0,P.jsxs)(U.A,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",value:ne.category,onChange:e=>le({...ne,category:e.target.value}),fullWidth:!0,select:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}},children:[(0,P.jsx)(k.A,{value:"\u043e\u0434\u0435\u0436\u0434\u0430",children:"\u041e\u0434\u0435\u0436\u0434\u0430"}),(0,P.jsx)(k.A,{value:"\u043e\u0431\u0443\u0432\u044c",children:"\u041e\u0431\u0443\u0432\u044c"})]}),ne.category&&(0,P.jsxs)(a.A,{children:[(0,P.jsx)(p.A,{variant:"subtitle1",gutterBottom:!0,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u044b"}),(0,P.jsx)(a.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:("\u043e\u0434\u0435\u0436\u0434\u0430"===ne.category?["XS","S","M","L","XL","XXL"]:["36","37","38","39","40","41","42","43","44","45"]).map((e=>{var r,t;return(0,P.jsx)(f.A,{label:e,onClick:()=>le((r=>({...r,sizes:[...r.sizes||[],e]}))),color:null!==(r=ne.sizes)&&void 0!==r&&r.includes(e)?"primary":"default",variant:null!==(t=ne.sizes)&&void 0!==t&&t.includes(e)?"filled":"outlined",sx:{cursor:"pointer",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}},e)}))})]}),(0,P.jsx)(U.A,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number",value:ne.stock,onChange:e=>le({...ne,stock:Number(e.target.value)}),fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}}),(0,P.jsx)(U.A,{label:"URL \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",value:ne.imageUrl,onChange:e=>le({...ne,imageUrl:e.target.value}),fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]})}),(0,P.jsxs)(D.A,{sx:{p:3,borderTop:`1px solid ${e.palette.divider}`},children:[(0,P.jsx)(S.A,{onClick:()=>oe(!1),sx:{color:e.palette.text.secondary,"&:hover":{backgroundColor:(0,d.X4)(e.palette.grey[500],.1)}},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,P.jsx)(S.A,{onClick:()=>{if(!ne.name||!ne.description||!ne.price||!ne.category||!ne.imageUrl)return void r("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f",{variant:"error"});const e={id:crypto.randomUUID(),name:ne.name,description:ne.description,price:ne.price,category:ne.category,stock:ne.stock||0,imageUrl:ne.imageUrl,sizes:ne.sizes||[],createdAt:(new Date).toISOString()};V((r=>[...r,e])),le({name:"",description:"",price:0,category:"",stock:0,imageUrl:"",sizes:[]}),oe(!1),r("\u0422\u043e\u0432\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",{variant:"success"})},variant:"contained",sx:{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark},borderRadius:"8px",textTransform:"none",padding:"8px 24px"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})]})}}}]);
//# sourceMappingURL=619.628edbc4.chunk.js.map