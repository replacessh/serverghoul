"use strict";(self.webpackChunkshop_client=self.webpackChunkshop_client||[]).push([[442],{9442:(e,r,t)=>{t.r(r),t.d(r,{default:()=>W});var n=t(5043),i=t(3216),a=t(9456),o=t(7478),s=t(6240),l=t(6446),c=t(1637),d=t(4150),x=t(4194),p=t(1906),h=t(310),m=t(8903),u=t(3336),g=t(7392),b=t(5865),v=t(6682),j=t(3193),A=t(9190),y=t(1659),f=t(2143),w=t(5795),k=t(1045),C=t(7332),S=t(3560),X=t(7652),I=t(916),E=t(638),R=t(3817),$=t(9066),z=t(579);const F="admin_products",W=()=>{var e,r,t,W;const{id:O}=(0,i.g)(),D=(0,i.Zp)(),[L,B]=(0,n.useState)(null),[M,N]=(0,n.useState)(!0),[T,J]=(0,n.useState)(null),[U,Y]=(0,n.useState)(""),[_,q]=(0,n.useState)(0),[H,Z]=(0,n.useState)({rating:5,comment:""}),[G,K]=(0,n.useState)(!1),{token:P,user:Q}=(0,$.As)(),V=(0,a.wA)(),ee=(0,s.A)(),[re,te]=(0,n.useState)(!1),[ne,ie]=(0,n.useState)({x:0,y:0});(0,n.useEffect)((()=>{O&&(()=>{try{N(!0),J(null);const e=localStorage.getItem(F);if(!e)throw new Error("\u0422\u043e\u0432\u0430\u0440\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b");const r=JSON.parse(e).find((e=>e.id===O));if(!r)throw new Error("\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d");B(r)}catch(e){console.error("Error loading product:",e),J(e instanceof Error?e.message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0442\u043e\u0432\u0430\u0440\u0430")}finally{N(!1)}})()}),[O]),(0,n.useEffect)((()=>{const e=e=>{"ArrowLeft"===e.key?oe():"ArrowRight"===e.key?ae():"Escape"===e.key&&te(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const ae=()=>{null!==L&&void 0!==L&&L.images&&(q((e=>(e+1)%L.images.length)),te(!1))},oe=()=>{null!==L&&void 0!==L&&L.images&&(q((e=>(e-1+L.images.length)%L.images.length)),te(!1))},se=()=>{te(!re)};if(M)return(0,z.jsx)(l.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,z.jsx)(c.A,{})});if(T)return(0,z.jsx)(d.A,{children:(0,z.jsx)(x.A,{severity:"error",sx:{mt:2},children:T})});if(!L)return(0,z.jsx)(d.A,{children:(0,z.jsx)(x.A,{severity:"error",sx:{mt:2},children:"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"})});const le=(null===(e=L.reviews)||void 0===e?void 0:e.length)>0?L.reviews.reduce(((e,r)=>e+r.rating),0)/L.reviews.length:0,ce=L.images||[L.imageUrl];return(0,z.jsxs)(d.A,{maxWidth:"lg",sx:{py:4},children:[(0,z.jsxs)(l.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,z.jsx)(p.A,{startIcon:(0,z.jsx)(C.A,{}),onClick:()=>D(-1),sx:{color:"text.secondary","&:hover":{backgroundColor:(0,h.X4)(ee.palette.primary.main,.1)}},children:"\u041d\u0430\u0437\u0430\u0434"}),"ADMIN"===(null===Q||void 0===Q?void 0:Q.role)&&(0,z.jsx)(p.A,{startIcon:(0,z.jsx)(S.A,{}),onClick:()=>{D(`/admin/products/${O}/edit`)},variant:"outlined",color:"primary",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),(0,z.jsxs)(m.Ay,{container:!0,spacing:4,children:[(0,z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,z.jsxs)(u.A,{elevation:0,sx:{borderRadius:3,overflow:"hidden",backgroundColor:(0,h.X4)(ee.palette.background.paper,.8),backdropFilter:"blur(10px)",boxShadow:`0 4px 20px ${(0,h.X4)(ee.palette.primary.main,.1)}`,position:"relative"},children:[(0,z.jsxs)(l.A,{sx:{position:"relative",overflow:"hidden",cursor:re?"zoom-out":"zoom-in"},children:[(0,z.jsx)(l.A,{component:"img",src:ce[_],alt:L.name,onClick:se,onMouseMove:e=>{if(!re)return;const{left:r,top:t,width:n,height:i}=e.currentTarget.getBoundingClientRect(),a=(e.clientX-r)/n*100,o=(e.clientY-t)/i*100;ie({x:a,y:o})},sx:{width:"100%",height:"500px",objectFit:"cover",transition:"transform 0.3s ease",transform:re?"scale(2)":"scale(1)",transformOrigin:`${ne.x}% ${ne.y}%`,"&:hover":{transform:re?"scale(2)":"scale(1.02)"}}}),!re&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.A,{onClick:se,sx:{position:"absolute",right:16,bottom:16,backgroundColor:(0,h.X4)(ee.palette.background.paper,.8),"&:hover":{backgroundColor:(0,h.X4)(ee.palette.background.paper,.9)}},children:(0,z.jsx)(X.A,{})}),(0,z.jsx)(g.A,{onClick:oe,sx:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",backgroundColor:(0,h.X4)(ee.palette.background.paper,.8),"&:hover":{backgroundColor:(0,h.X4)(ee.palette.background.paper,.9)}},children:(0,z.jsx)(I.A,{})}),(0,z.jsx)(g.A,{onClick:ae,sx:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",backgroundColor:(0,h.X4)(ee.palette.background.paper,.8),"&:hover":{backgroundColor:(0,h.X4)(ee.palette.background.paper,.9)}},children:(0,z.jsx)(E.A,{})})]})]}),ce.length>1&&(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(l.A,{sx:{position:"absolute",bottom:16,left:"50%",transform:"translateX(-50%)",display:"flex",gap:1},children:ce.map(((e,r)=>(0,z.jsx)(l.A,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:_===r?ee.palette.primary.main:(0,h.X4)(ee.palette.primary.main,.3),cursor:"pointer",transition:"all 0.2s ease","&:hover":{backgroundColor:ee.palette.primary.main}},onClick:()=>{q(r),te(!1)}},r)))})}),ce.length>1&&(0,z.jsx)(l.A,{sx:{display:"flex",gap:1,p:2,overflowX:"auto","&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:(0,h.X4)(ee.palette.primary.main,.2),borderRadius:"2px"}},children:ce.map(((e,r)=>(0,z.jsx)(l.A,{component:"img",src:e,alt:`${L.name} ${r+1}`,onClick:()=>{q(r),te(!1)},sx:{width:"80px",height:"80px",objectFit:"cover",borderRadius:1,cursor:"pointer",border:_===r?`2px solid ${ee.palette.primary.main}`:"none",opacity:_===r?1:.7,transition:"all 0.2s ease","&:hover":{opacity:1}}},r)))})]})}),(0,z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,z.jsxs)(u.A,{elevation:0,sx:{p:4,borderRadius:3,backgroundColor:(0,h.X4)(ee.palette.background.paper,.8),backdropFilter:"blur(10px)",boxShadow:`0 4px 20px ${(0,h.X4)(ee.palette.primary.main,.1)}`},children:[(0,z.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,z.jsx)(b.A,{variant:"h4",component:"h1",sx:{fontWeight:600},children:L.name}),(0,z.jsx)(g.A,{onClick:()=>{if(!L)return;const e={title:L.name,text:L.description,url:window.location.href};navigator.share?navigator.share(e).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f:",e)})):navigator.clipboard.writeText(window.location.href).then((()=>{alert("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430")})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438:",e)}))},sx:{color:"text.secondary","&:hover":{backgroundColor:(0,h.X4)(ee.palette.primary.main,.1)}},children:(0,z.jsx)(R.A,{})})]}),(0,z.jsxs)(l.A,{sx:{mb:3},children:[(0,z.jsxs)(b.A,{variant:"h5",color:"primary",sx:{fontWeight:700},children:[L.price.toLocaleString("ru-RU")," \u20bd"]}),(0,z.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[(0,z.jsx)(v.A,{value:le,precision:.5,readOnly:!0}),(0,z.jsxs)(b.A,{variant:"body2",color:"text.secondary",children:[(null===(r=L.reviews)||void 0===r?void 0:r.length)||0," \u043e\u0442\u0437\u044b\u0432\u043e\u0432"]})]})]}),(0,z.jsx)(b.A,{variant:"body1",paragraph:!0,sx:{color:"text.secondary"},children:L.description}),L.details&&(0,z.jsxs)(l.A,{sx:{mb:3},children:[(0,z.jsx)(b.A,{variant:"h6",gutterBottom:!0,children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0442\u043e\u0432\u0430\u0440\u0430"}),(0,z.jsxs)(m.Ay,{container:!0,spacing:2,children:[L.details.material&&(0,z.jsxs)(m.Ay,{item:!0,xs:12,sm:4,children:[(0,z.jsx)(b.A,{variant:"subtitle2",color:"text.secondary",children:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"}),(0,z.jsx)(b.A,{variant:"body1",children:L.details.material})]}),L.details.care&&(0,z.jsxs)(m.Ay,{item:!0,xs:12,sm:4,children:[(0,z.jsx)(b.A,{variant:"subtitle2",color:"text.secondary",children:"\u0423\u0445\u043e\u0434"}),(0,z.jsx)(b.A,{variant:"body1",children:L.details.care})]}),L.details.country&&(0,z.jsxs)(m.Ay,{item:!0,xs:12,sm:4,children:[(0,z.jsx)(b.A,{variant:"subtitle2",color:"text.secondary",children:"\u0421\u0442\u0440\u0430\u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430"}),(0,z.jsx)(b.A,{variant:"body1",children:L.details.country})]})]})]}),(null===(t=L.sizes)||void 0===t?void 0:t.length)>0&&(0,z.jsxs)(j.A,{fullWidth:!0,sx:{mb:3},children:[(0,z.jsx)(A.A,{children:"\u0420\u0430\u0437\u043c\u0435\u0440"}),(0,z.jsx)(y.A,{value:U,onChange:e=>{Y(e.target.value)},label:"\u0420\u0430\u0437\u043c\u0435\u0440",sx:{"& .MuiSelect-select":{py:1.5}},children:L.sizes.map((e=>(0,z.jsx)(f.A,{value:e,children:e},e)))})]}),(0,z.jsx)(p.A,{variant:"contained",color:"primary",onClick:()=>{var e;if(P){if(L)if((null===(e=L.sizes)||void 0===e?void 0:e.length)>0&&!U)J("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0440");else try{V((0,o.bE)({id:L.id,productId:L.id,name:L.name,price:L.price,quantity:1,size:U||"default",image:L.imageUrl})),alert("\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")}catch(r){console.error("Error adding to cart:",r),J("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")}}else J("\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f")},fullWidth:!0,sx:{py:1.5,borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"1.1rem",boxShadow:"none","&:hover":{boxShadow:`0 4px 12px ${(0,h.X4)(ee.palette.primary.main,.3)}`}},children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})})]}),(0,z.jsxs)(l.A,{sx:{mt:4},children:[(0,z.jsx)(b.A,{variant:"h5",gutterBottom:!0,children:"\u041e\u0442\u0437\u044b\u0432\u044b"}),Q&&(0,z.jsxs)(u.A,{elevation:0,sx:{p:4,mb:3,borderRadius:3,backgroundColor:(0,h.X4)(ee.palette.background.paper,.8),backdropFilter:"blur(10px)",boxShadow:`0 4px 20px ${(0,h.X4)(ee.palette.primary.main,.1)}`},children:[(0,z.jsx)(b.A,{variant:"h6",gutterBottom:!0,children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432"}),(0,z.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),P)try{if(K(!0),L){const e={id:Date.now().toString(),rating:H.rating,comment:H.comment,createdAt:(new Date).toISOString(),author:{id:(null===Q||void 0===Q?void 0:Q.id)||"",name:(null===Q||void 0===Q?void 0:Q.name)||"\u0410\u043d\u043e\u043d\u0438\u043c"}},r={...L,reviews:[...L.reviews||[],e]},t=localStorage.getItem(F);if(t){const e=JSON.parse(t).map((e=>e.id===L.id?r:e));localStorage.setItem(F,JSON.stringify(e)),B(r)}Z({rating:5,comment:""}),J(null)}}catch(r){console.error("Error submitting review:",r),J("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043e\u0442\u0437\u044b\u0432\u0430")}finally{K(!1)}else J("\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0442\u0437\u044b\u0432\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f")},children:[(0,z.jsxs)(l.A,{sx:{mb:2},children:[(0,z.jsx)(b.A,{component:"legend",children:"\u041e\u0446\u0435\u043d\u043a\u0430"}),(0,z.jsx)(v.A,{name:"rating",value:H.rating,onChange:(e,r)=>{null!==r&&Z((e=>({...e,rating:r})))}})]}),(0,z.jsx)(w.A,{fullWidth:!0,label:"\u0412\u0430\u0448 \u043e\u0442\u0437\u044b\u0432",name:"comment",value:H.comment,onChange:e=>{const{name:r,value:t}=e.target;Z((e=>({...e,[r]:t})))},multiline:!0,rows:4,required:!0,sx:{mb:2}}),(0,z.jsx)(p.A,{type:"submit",variant:"contained",color:"primary",disabled:G,sx:{py:1.5,borderRadius:2,textTransform:"none",fontWeight:600,boxShadow:"none","&:hover":{boxShadow:`0 4px 12px ${(0,h.X4)(ee.palette.primary.main,.3)}`}},children:G?"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432"})]})]}),(null===(W=L.reviews)||void 0===W?void 0:W.length)>0?L.reviews.map((e=>(0,z.jsxs)(u.A,{elevation:0,sx:{p:4,mb:2,borderRadius:3,backgroundColor:(0,h.X4)(ee.palette.background.paper,.8),backdropFilter:"blur(10px)",boxShadow:`0 4px 20px ${(0,h.X4)(ee.palette.primary.main,.1)}`},children:[(0,z.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,z.jsx)(k.A,{sx:{bgcolor:"primary.main",mr:2},children:e.author.name[0]}),(0,z.jsxs)(l.A,{children:[(0,z.jsx)(b.A,{variant:"subtitle1",children:e.author.name}),(0,z.jsx)(b.A,{variant:"body2",color:"text.secondary",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,z.jsx)(v.A,{value:e.rating,readOnly:!0,size:"small",sx:{mb:1}}),(0,z.jsx)(b.A,{variant:"body1",children:e.comment})]},e.id))):(0,z.jsx)(b.A,{variant:"body1",color:"text.secondary",children:"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442 \u043e\u0442\u0437\u044b\u0432\u043e\u0432. \u0411\u0443\u0434\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c, \u043a\u0442\u043e \u043e\u0441\u0442\u0430\u0432\u0438\u0442 \u043e\u0442\u0437\u044b\u0432!"})]})]})}}}]);
//# sourceMappingURL=442.7e2ace09.chunk.js.map